{% extends "rest_framework/base.html" %}

{% block content %}
<div class="content-main" role="main" aria-label="main content">
    <div class="page-header">
        <h1>{{ name }}</h1>
    </div>
    <p>There are {{ queuedtaskcount }} unfinished tasks in the queue with the most recent completion at {{ lastfinishtime }} (as of {% now "H:i:s" %} UTC).</p>
    In the last seven days there were {{ sevendaytasks }} tasks ({{ sevendaytaskrate }}) from {{ sevendayusers }} users. In this period:
    <ul style="padding-left: 2em">
        <li>Load factor (arrival rate / completion rate): {{ sevendayloadpercent }}</li>
        <li>Average queue waiting time: {{ sevendayavgwaittime }}</li>
        <li>Average task running time: {{ sevendayavgruntime }}</li>
    </ul>

    <div id="statslongterm">&nbsp;</div>
    <div style="clear: both">&nbsp;</div>
    <div id="statscoordchart">&nbsp;</div>
</div>
{% endblock %}



{% block script %}
  {{ block.super }}
  <script language="javascript" type="text/javascript">
    $.ajax({
        url: "{% url 'statslongterm'|escapejs %}",
        success: function(result){
          $('#statslongterm').html(result);
      }});

    $.ajax({
        url: "{% url 'statscoordchart'|escapejs %}",
        success: function(result){
          $('#statscoordchart').html(result.div);
          $("head").append(result.script);
      }});
  </script>
{% endblock %}